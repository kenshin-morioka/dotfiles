# Neovim チートシート

## ファイル操作

### Telescope（ファジー検索）

| キー | 説明 |
| ---- | ---- |
| `,ff` | ファイル検索 |
| `,ff` → `<C-x>` | 水平分割で開く |
| `,ff` → `<C-v>` | 垂直分割で開く |
| `,fg` | テキスト検索（grep） |

### バッファ操作

| キー | 説明 |
| ---- | ---- |
| `Tab` | 次のバッファ |
| `Shift+Tab` | 前のバッファ |
| `,q` | 現在のバッファを閉じる |
| `;bd` | バッファを閉じる |
| `;bd!` | 保存せず強制的に閉じる |
| `;q` | ウィンドウを閉じる |
| `;w \| bd` | 保存して閉じる |

### ウィンドウ移動

| キー | 説明 |
| ---- | ---- |
| `,h` | 左のウィンドウへ |
| `,j` | 下のウィンドウへ |
| `,k` | 上のウィンドウへ |
| `,l` | 右のウィンドウへ |
| `Ctrl+w w` | 次のウィンドウへ循環 |

---

## 編集

### 基本操作

| キー | 説明 |
| ---- | ---- |
| `u` | 元に戻す（Undo） |
| `Ctrl+r` | やり直す（Redo） |

### コメント（Comment.nvim）

| キー | モード | 説明 |
| ---- | ------ | ---- |
| `gcc` | ノーマル | 現在行をコメントトグル |
| `gc` | ビジュアル | 選択範囲をコメントトグル |
| `gbc` | ノーマル | 現在行をブロックコメント |
| `gb` | ビジュアル | 選択範囲をブロックコメント |

### 検索（バッファ内）

| コマンド | 説明 |
| -------- | ---- |
| `/検索文字列` | 前方検索 |
| `?検索文字列` | 後方検索 |
| `n` / `N` | 次/前のマッチへ |
| `*` | カーソル下の単語を検索 |
| `Esc Esc` | 検索ハイライト解除 |

### 検索・置換（プロジェクト全体 / Spectre）

| キー | 説明 |
| ---- | ---- |
| `,sr` | プロジェクト全体の検索・置換パネル |
| `,sf` | 現在ファイルのみ検索・置換 |
| `,sw` | カーソル下の単語で検索 |

パネル内操作:

| キー | 説明 |
| ---- | ---- |
| `Enter` | 該当箇所にジャンプ |
| `dd` | その行を置換対象から除外 |
| `,R` | 全て置換実行 |
| `,rc` | カーソル行のみ置換 |
| `q` | パネルを閉じる |

---

## LSP（言語サーバー）

### ナビゲーション

| キー | 説明 |
| ---- | ---- |
| `gd` | 定義へジャンプ |
| `gD` | 宣言へジャンプ |
| `gi` | 実装へジャンプ |
| `gr` | 参照一覧 |
| `gt` | 型定義へジャンプ |

### 情報・アクション

| キー | 説明 |
| ---- | ---- |
| `,K` | ホバー情報 |
| `<C-k>` | シグネチャヘルプ |
| `,rn` | リネーム |
| `,ca` | コードアクション |

### 診断（Diagnostics）

| キー | 説明 |
| ---- | ---- |
| `[d` | 前の診断へ |
| `]d` | 次の診断へ |
| `,dd` | 診断をフロート表示 |
| `,dl` | 診断をリスト表示 |

### LSP管理コマンド

| コマンド | 説明 |
| -------- | ---- |
| `:Mason` | LSPサーバー管理画面 |
| `:LspInfo` | LSPの状態確認 |
| `:LspLog` | エラーログ確認 |
| `:LspRestart` | LSP再起動 |

---

## Git

### Gitsigns（変更箇所）

| キー | 説明 |
| ---- | ---- |
| `]c` | 次の変更箇所へ |
| `[c` | 前の変更箇所へ |
| `,hp` | 変更内容をプレビュー |
| `,hs` | 変更をステージ |
| `,hr` | 変更を元に戻す |
| `,hb` | その行のblame表示 |
| `,tb` | current line blameトグル |

### Diffview（差分レビュー）

| キー | 説明 |
| ---- | ---- |
| `,gd` | 現在の変更をdiff表示 |
| `,gh` | 現在ファイルの履歴 |
| `,gH` | ブランチ全体の履歴 |
| `,gc` | Diffviewを閉じる |

Diffview内:

| キー | 説明 |
| ---- | ---- |
| `]c` / `[c` | 次/前の変更へジャンプ |
| `Tab` / `S-Tab` | 次/前のファイルへ |
| `q` | 閉じる |

### Git Conflict（コンフリクト解消）

コンフリクトファイルを開くと自動でハイライト表示

| キー | 説明 |
| ---- | ---- |
| `co` | 自分の変更（Ours）を採用 |
| `ct` | 相手の変更（Theirs）を採用 |
| `cb` | 両方を採用 |
| `c0` | 両方削除 |
| `]x` | 次のコンフリクトへ |
| `[x` | 前のコンフリクトへ |

コマンド:

| コマンド | 説明 |
| -------- | ---- |
| `:GitConflictChooseOurs` | 全て自分の変更を採用 |
| `:GitConflictChooseTheirs` | 全て相手の変更を採用 |
| `:GitConflictListQf` | コンフリクト一覧 |

---

## ターミナル

| キー | 説明 |
| ---- | ---- |
| `Ctrl+\` | ターミナル開閉 |

---

## その他プラグイン

### 折りたたみ（nvim-ufo）

| キー | 説明 |
| ---- | ---- |
| `zR` | 全折りたたみを開く |
| `zM` | 全折りたたみを閉じる |
| `zr` | 1レベル開く |
| `zm` | 1レベル閉じる |
| `K` | 折りたたみプレビュー/ホバー |

### シンボル・ナビゲーション

| キー | 説明 |
| ---- | ---- |
| `,ss` | シンボル一覧（namu） |
| `,tc` | コンテキストへジャンプ（treesitter-context） |
| `,dp` | ブレッドクラムピッカー（dropbar） |

### ドキュメント生成

| キー | 説明 |
| ---- | ---- |
| `,dg` | ドキュメントコメント生成（vim-doge） |

### Markdownプレビュー

| キー | 説明 |
| ---- | ---- |
| `,mp` | ブラウザでプレビュー表示/非表示 |

### フォーマット

| キー | 説明 |
| ---- | ---- |
| `,cf` | バッファをフォーマット |

---

## RailsプロジェクトでLSPを使う

```bash
cd your-rails-project

# Gemfileに追加
bundle add ruby-lsp --group=development

# インストール
bundle install

# Neovimで開く
nvim .
```

`.rb`ファイルを開くとLSPが自動起動します。
